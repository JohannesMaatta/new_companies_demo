<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>n8n Webhook Test</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 760px; margin: 40px auto; padding: 0 16px; }
    label { display:block; margin: 12px 0 6px; }
    input, textarea { width: 100%; padding: 10px; }
    button { margin-top: 12px; padding: 10px 16px; cursor: pointer; }
    .row { display:flex; gap:12px; flex-wrap: wrap; }
    .row > * { flex: 1 1 240px; }
    #status { margin-top: 18px; white-space: pre-wrap; border: 1px solid #ddd; padding: 12px; border-radius: 8px; }
    small { color:#666; }
  </style>
</head>
<body>
  <h1>n8n Webhook Test</h1>
  <p>Replace <code>YOUR_TEST_WEBHOOK_URL</code> below with your n8n <b>test</b> webhook URL.</p>

  <label>Webhook URL</label>
  <input id="url" value="https://YOUR_TEST_WEBHOOK_URL" />

  <div class="row">
    <div>
      <label>Name</label>
      <input id="name" placeholder="Ada Lovelace" />
    </div>
    <div>
      <label>Email</label>
      <input id="email" placeholder="ada@example.com" />
    </div>
  </div>

  <label>Message</label>
  <textarea id="message" rows="4" placeholder="Hello from GitHub Pages!"></textarea>

  <div class="row">
    <button id="send-form">Send as form (urlencoded)</button>
    <button id="send-json">Send as JSON (might need CORS headers)</button>
  </div>

  <p><small>
    Tip: If JSON fails due to CORS, try the form option or add CORS headers on your n8n host/proxy.
  </small></p>

  <div id="status">Status will appear here…</div>

<script>
const $ = (id) => document.getElementById(id);
const show = (msg) => { $("status").textContent = msg; };

async function sendForm() {
  const url = $("url").value.trim();
  const body = new URLSearchParams({
    name: $("name").value,
    email: $("email").value,
    message: $("message").value
  });

  show("Sending form…");
  try {
    const res = await fetch(url, {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body
    });
    const text = await res.text(); // might be JSON or text
    show(`HTTP ${res.status}\n\n${text}`);
  } catch (err) {
    show(`Request error:\n${err}`);
  }
}

async function sendJSON() {
  const url = $("url").value.trim();
  const payload = {
    name: $("name").value,
    email: $("email").value,
    message: $("message").value,
    source: "github-pages"
  };

  show("Sending JSON… (this may require CORS headers on your server)");
  try {
    const res = await fetch(url, {
      method: "POST",
      headers: { "Content-Type": "application/json" }, // will usually trigger preflight
      body: JSON.stringify(payload)
    });

    const text = await res.text();
    show(`HTTP ${res.status}\n\n${text}`);
  } catch (err) {
    show(`Request error:\n${err}`);
  }
}

$("send-form").addEventListener("click", sendForm);
$("send-json").addEventListener("click", sendJSON);
</script>
</body>
</html>